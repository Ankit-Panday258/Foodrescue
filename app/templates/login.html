{% extends "components/base.html" %} {% block title %}Login - Food Rescue{%
endblock %} {% block stylesheets %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/auth.css') }}" />
{% endblock %} {% block content %}

<div class="auth-page">
  <!-- Page Header -->
  <div class="page-header bg-light py-4">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-md-8">
          <h1 class="h3 mb-0">
            <i class="fas fa-sign-in-alt text-primary"></i>
            Welcome Back
          </h1>
          <p class="text-muted mb-0">Sign in to your Food Rescue account</p>
        </div>
        <div class="col-md-4 text-md-end">
          <a href="{{ url_for('home.index') }}" class="btn btn-outline-primary">
            <i class="fas fa-home"></i>
            Back to Home
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-lg-5 col-md-7">
        <!-- Login Card -->
        <div class="card login-card">
          <div class="card-header text-center">
            <h4 class="mb-0">
              <i class="fas fa-leaf text-success"></i>
              Food Rescue
            </h4>
            <p class="text-muted small mt-2">Sign in to continue</p>
          </div>
          <div class="card-body">
            <!-- Login Form -->
            <form
              method="POST"
              action="{{ url_for('auth.login') }}"
              class="needs-validation"
              novalidate>
              <!-- Email Field -->
              <div class="form-group">
                <label for="email" class="form-label">
                  <i class="fas fa-envelope"></i>
                  Email Address
                </label>
                <input
                  type="email"
                  class="form-control"
                  id="email"
                  name="email"
                  required
                  placeholder="Enter your email"
                  value="{{ request.form.get('email', '') }}"
                  autocomplete="email" />
                <div class="invalid-feedback">
                  Please provide a valid email address.
                </div>
              </div>

              <!-- Password Field -->
              <div class="form-group">
                <label for="password" class="form-label">
                  <i class="fas fa-lock"></i>
                  Password
                </label>
                <div class="password-input-group">
                  <input
                    type="password"
                    class="form-control"
                    id="password"
                    name="password"
                    required
                    placeholder="Enter your password"
                    autocomplete="current-password" />
                  <button
                    type="button"
                    class="password-toggle"
                    id="togglePassword">
                    <i class="fas fa-eye"></i>
                  </button>
                </div>
                <div class="invalid-feedback">
                  Please provide your password.
                </div>
              </div>

              <!-- Remember Me and Forgot Password -->
              <div class="form-group">
                <div class="d-flex justify-content-between align-items-center">
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="remember"
                      name="remember" />
                    <label class="form-check-label" for="remember">
                      Remember me
                    </label>
                  </div>
                  <a href="#" class="forgot-password text-muted">
                    Forgot password?
                  </a>
                </div>
              </div>

              <!-- Submit Button -->
              <div class="form-group">
                <button type="submit" class="btn btn-primary btn-lg w-100">
                  <i class="fas fa-sign-in-alt"></i>
                  Sign In
                </button>
              </div>
            </form>

            <!-- Divider -->
            <div class="divider">
              <span>or</span>
            </div>

            <!-- Social Login Placeholder -->
            <div class="social-login">
              <button class="btn btn-outline-secondary w-100 mb-2" disabled>
                <i class="fab fa-google"></i>
                Continue with Google (Coming Soon)
              </button>
              <button class="btn btn-outline-secondary w-100" disabled>
                <i class="fab fa-facebook"></i>
                Continue with Facebook (Coming Soon)
              </button>
            </div>
          </div>
          <div class="card-footer text-center">
            <p class="mb-0">
              Don't have an account?
              <a
                href="{{ url_for('auth.register') }}"
                class="text-primary fw-bold">
                Sign up here
              </a>
            </p>
          </div>
        </div>

        <!-- Additional Info -->
        <div class="login-info mt-4">
          <div class="row text-center">
            <div class="col-md-4">
              <div class="info-item">
                <i class="fas fa-shield-alt text-success"></i>
                <h6>Secure</h6>
                <small class="text-muted">Your data is protected</small>
              </div>
            </div>
            <div class="col-md-4">
              <div class="info-item">
                <i class="fas fa-users text-primary"></i>
                <h6>Community</h6>
                <small class="text-muted">Join food heroes</small>
              </div>
            </div>
            <div class="col-md-4">
              <div class="info-item">
                <i class="fas fa-leaf text-success"></i>
                <h6>Impact</h6>
                <small class="text-muted">Reduce food waste</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Quick Stats -->
  <div class="container mt-5">
    <div class="row">
      <div class="col-12">
        <div class="quick-stats bg-light py-4 rounded">
          <div class="row text-center">
            <div class="col-md-3 col-6">
              <div class="stat-item">
                <div class="stat-number text-primary">1,247</div>
                <div class="stat-label">Food Items Rescued</div>
              </div>
            </div>
            <div class="col-md-3 col-6">
              <div class="stat-item">
                <div class="stat-number text-success">892</div>
                <div class="stat-label">Active Members</div>
              </div>
            </div>
            <div class="col-md-3 col-6">
              <div class="stat-item">
                <div class="stat-number text-info">456</div>
                <div class="stat-label">Successful Claims</div>
              </div>
            </div>
            <div class="col-md-3 col-6">
              <div class="stat-item">
                <div class="stat-number text-warning">2.3k</div>
                <div class="stat-label">Kg Food Saved</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %} {% block scripts %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.querySelector(".needs-validation");
    const passwordInput = document.getElementById("password");
    const togglePassword = document.getElementById("togglePassword");

    // Password visibility toggle
    if (togglePassword && passwordInput) {
      togglePassword.addEventListener("click", function () {
        const type =
          passwordInput.getAttribute("type") === "password"
            ? "text"
            : "password";
        passwordInput.setAttribute("type", type);

        const icon = this.querySelector("i");
        if (type === "password") {
          icon.classList.remove("fa-eye-slash");
          icon.classList.add("fa-eye");
        } else {
          icon.classList.remove("fa-eye");
          icon.classList.add("fa-eye-slash");
        }
      });
    }

    // Form validation
    form.addEventListener("submit", function (e) {
      if (!form.checkValidity()) {
        e.preventDefault();
        e.stopPropagation();
      } else {
        // Show loading state
        const submitBtn = form.querySelector('button[type="submit"]');
        submitBtn.disabled = true;
        submitBtn.classList.add("loading");
        submitBtn.innerHTML =
          '<i class="fas fa-spinner fa-spin"></i> Signing In...';
      }

      form.classList.add("was-validated");
    });

    // Real-time validation
    const inputs = form.querySelectorAll("input");
    inputs.forEach((input) => {
      input.addEventListener("blur", function () {
        if (this.checkValidity()) {
          this.classList.remove("is-invalid");
          this.classList.add("is-valid");
        } else {
          this.classList.remove("is-valid");
          this.classList.add("is-invalid");
        }
      });

      input.addEventListener("input", function () {
        if (this.classList.contains("is-invalid") && this.checkValidity()) {
          this.classList.remove("is-invalid");
          this.classList.add("is-valid");
        }
      });
    });

    // Auto-focus on first input
    const firstInput = form.querySelector("input");
    if (firstInput) {
      firstInput.focus();
    }

    // Handle Enter key on password field
    if (passwordInput) {
      passwordInput.addEventListener("keypress", function (e) {
        if (e.key === "Enter") {
          form.dispatchEvent(new Event("submit"));
        }
      });
    }
  });
</script>
{% endblock %}
